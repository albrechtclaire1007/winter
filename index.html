<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Winter – Hörspiel</title>

  <style>
    @font-face{
      font-family:"Louisville";
      src:url("https://github.com/albrechtclaire1007/winter4/raw/refs/heads/main/LouisvilleIi-Regular.otf") format("opentype");
      font-display:swap;
    }

    html, body { height:100%; margin:0; }
    body{
      background:#eaf2ff url("https://i.postimg.cc/BbCyMf2N/winter-background.png") no-repeat center top;
      background-size:contain; /* fully visible */
      overflow:hidden;
      font-family:"Louisville", system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
    }

    /* Top center: snowball numbers + instruction */
    .topBar{
      position:absolute;
      top:14px;
      left:50%;
      transform:translateX(-50%);
      width:min(860px, 94vw);
      display:flex;
      flex-direction:column;
      align-items:center;
      gap:10px;
      z-index:10;
      pointer-events:auto;
    }

    .snowballs{
      display:flex;
      gap:14px;
      align-items:center;
      justify-content:center;
    }

    .snowBtn{
      width:86px;
      height:86px;
      border:0;
      padding:0;
      background:transparent;
      cursor:pointer;
      display:grid;
      place-items:center;
      filter:drop-shadow(0 10px 14px rgba(0,0,0,0.20));
    }
    .snowBtn img{
      width:100%;
      height:100%;
      object-fit:contain;
      display:block;
    }
    .snowBtn:active{ transform:scale(0.985); }

    .instr{
      width:100%;
      background:rgba(255,255,255,0.88);
      border-radius:18px;
      padding:12px 16px;
      box-shadow:0 10px 18px rgba(0,0,0,0.14);
      font-size:22px;
      text-align:center;
      line-height:1.2;
      user-select:none;
    }

    /* 4 images in a row */
    .optionsRow{
      position:absolute;
      left:50%;
      transform:translateX(-50%);
      top:34%;
      width:min(1100px, 92vw);
      display:flex;
      gap:18px;
      align-items:center;
      justify-content:center;
    }

    .imgBtn{
      width:22vw;
      max-width:250px;
      min-width:150px;
      aspect-ratio:1/1;
      border:0;
      border-radius:18px;
      background:rgba(255,255,255,0.0);
      cursor:pointer;
      padding:0;
      display:grid;
      place-items:center;
      transition:transform .10s ease;
      user-select:none;
    }
    .imgBtn:active{ transform:scale(0.985); }

    .imgBtn img{
      width:100%;
      height:100%;
      object-fit:contain;
      filter:drop-shadow(0 12px 18px rgba(0,0,0,0.22));
      display:block;
      pointer-events:none;
    }

    /* Bottom center controls */
    .bottomBar{
      position:absolute;
      left:50%;
      transform:translateX(-50%);
      bottom:16px;
      display:flex;
      gap:14px;
      align-items:center;
      justify-content:center;
      z-index:10;
      pointer-events:auto;
    }

    .roundBtn{
      width:66px;
      height:66px;
      border-radius:999px;
      border:0;
      cursor:pointer;
      background:rgba(255,255,255,0.85);
      box-shadow:0 12px 22px rgba(0,0,0,0.22);
      display:grid;
      place-items:center;
    }
    .roundBtn:active{ transform:scale(0.98); }

    .roundBtn svg{
      width:30px;
      height:30px;
      opacity:0.9;
    }

    @media (max-width: 700px){
      .instr{ font-size:18px; }
      .snowBtn{ width:72px; height:72px; }
      .optionsRow{ top:36%; }
    }
  </style>
</head>

<body>
  <!-- Top navigation -->
  <div class="topBar">
    <div class="snowballs">
      <button class="snowBtn" id="cat1" aria-label="Kategorie 1"><img src="https://i.postimg.cc/qtgDKnYS/1.png" alt=""></button>
      <button class="snowBtn" id="cat2" aria-label="Kategorie 2"><img src="https://i.postimg.cc/xkqpmHhD/2.png" alt=""></button>
      <button class="snowBtn" id="cat3" aria-label="Kategorie 3"><img src="https://i.postimg.cc/k6xq8kRC/3.png" alt=""></button>
      <button class="snowBtn" id="cat4" aria-label="Kategorie 4"><img src="https://i.postimg.cc/FdjNc2km/4.png" alt=""></button>
    </div>
    <div class="instr">Hör zu und klicke auf das passende Bild.</div>
  </div>

  <!-- Options -->
  <div class="optionsRow" id="options"></div>

  <!-- Bottom center controls -->
  <div class="bottomBar">
    <button class="roundBtn" id="btnBack" aria-label="Zurück">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M15 18l-6-6 6-6"/>
      </svg>
    </button>

    <button class="roundBtn" id="btnReplay" aria-label="Audio wiederholen">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M11 5l-5 4H3v6h3l5 4V5z"/>
        <path d="M15.5 8.5a4 4 0 010 7"/>
        <path d="M18 6a7 7 0 010 12"/>
      </svg>
    </button>
  </div>

<script>
  const AUDIO_BASE = "https://github.com/albrechtclaire1007/winter/raw/refs/heads/main/";

  // Kategorie-Zuordnung: 1=orange, 2=yellow, 3=pink, 4=blue
  const CATEGORIES = {
    "1": [
      { key:"eisbaer",   img:"https://i.postimg.cc/JHrCY1hM/eisbaer.png" },
      { key:"pinguin",   img:"https://i.postimg.cc/fkDsRvfg/pinguin.png" },
      { key:"eiszapfen", img:"https://i.postimg.cc/BPSf7qv3/eiszapfen.png" },
      { key:"berge",     img:"https://i.postimg.cc/CBHV4ZwK/berge.png" },
      { key:"tanne",     img:"https://i.postimg.cc/qgwThCmX/tanne.png" },
      { key:"vogel",     img:"https://i.postimg.cc/JtxLDBTq/vogel.png" }
    ],
    "2": [
      { key:"socken",       img:"https://i.postimg.cc/Cd7gBfvb/socken.png" },
      { key:"muetze",       img:"https://i.postimg.cc/3WYhxZFf/muetze.png" },
      { key:"wintermantel", img:"https://i.postimg.cc/vcmdWHjW/wintermantel.png" },
      { key:"pullover",     img:"https://i.postimg.cc/grmp2KHf/pullover.png" }
    ],
    "3": [
      { key:"kakao",         img:"https://i.postimg.cc/K3GhpZYK/kakao.png" },
      { key:"kerze",         img:"https://i.postimg.cc/vxYw2Qmt/kerze.png" },
      { key:"iglu",          img:"https://i.postimg.cc/9wmHgWfq/iglu.png" },
      { key:"kamin",         img:"https://i.postimg.cc/CnhprFK8/kamin.png" },
      { key:"waermeflasche", img:"https://i.postimg.cc/XXLbGy2s/waermeflasche.png" },
      { key:"decken",        img:"https://i.postimg.cc/zHzY2JfJ/decken.png" }
    ],
    "4": [
      { key:"schal",          img:"https://i.postimg.cc/7bw4ZNNy/schal.png" },
      { key:"schlittschuhe",  img:"https://i.postimg.cc/4nsGx11N/schlittschuhe.png" },
      { key:"schneemann",     img:"https://i.postimg.cc/Rq4mZTTn/schneemann.png" },
      { key:"schneekugel",    img:"https://i.postimg.cc/3WYhxZZy/schneekugel.png" },
      { key:"schneeflocke",   img:"https://i.postimg.cc/14sS3KKt/schneeflocke.png" },
      { key:"ski",            img:"https://i.postimg.cc/Cd7gBfvd/ski.png" },
      { key:"schlitten",      img:"https://i.postimg.cc/QVhDdqqZ/schlitten.png" },
      { key:"handschuhe",     img:"https://i.postimg.cc/Mf6J3WGx/handschuhe.png" },
      { key:"schneeball",     img:"https://i.postimg.cc/Thfx3cc2/schneeball.png" },
      { key:"hausschuhe",     img:"https://i.postimg.cc/7JHrtxLb/hausschuhe.png" },
      { key:"stiefel",        img:"https://i.postimg.cc/grsWX6MV/stiefel.png" },
      { key:"schneeschaufel", img:"https://i.postimg.cc/w32pysWj/schneeschaufel.png" },
      { key:"schneeeule",     img:"https://i.postimg.cc/s1szgJJg/schneeeule.png" }
    ]
  };

  const optionsEl = document.getElementById("options");
  const btnReplay = document.getElementById("btnReplay");
  const btnBack = document.getElementById("btnBack");

  let activeCat = "1";
  let queue = [];
  let current = null;
  let currentOptions = [];
  let audio = null;

  function shuffle(arr){
    const a = arr.slice();
    for(let i=a.length-1;i>0;i--){
      const j = Math.floor(Math.random()*(i+1));
      [a[i],a[j]] = [a[j],a[i]];
    }
    return a;
  }

  function pickDistinct(pool, n, avoidKey){
    const filtered = pool.filter(x => x.key !== avoidKey);
    return shuffle(filtered).slice(0, n);
  }

  function playAudioFor(key){
    if(audio){ audio.pause(); audio.currentTime = 0; }
    audio = new Audio(`${AUDIO_BASE}${key}.mp3`);
    audio.play().catch(()=>{});
  }

  function startCategory(cat){
    activeCat = cat;
    queue = shuffle(CATEGORIES[activeCat]);
    nextWord();
  }

  function nextWord(){
    if(queue.length === 0){
      // wenn fertig: neu mischen und weiter
      queue = shuffle(CATEGORIES[activeCat]);
    }

    current = queue.shift();
    const pool = CATEGORIES[activeCat];
    const distractors = pickDistinct(pool, 3, current.key);
    currentOptions = shuffle([current, ...distractors]);

    optionsEl.innerHTML = "";
    currentOptions.forEach(item=>{
      const btn = document.createElement("button");
      btn.className = "imgBtn";
      btn.type = "button";
      btn.innerHTML = `<img src="${item.img}" alt="">`;
      btn.onclick = ()=>choose(item.key);
      optionsEl.appendChild(btn);
    });

    playAudioFor(current.key);
  }

  function choose(chosenKey){
    if(!current) return;
    if(chosenKey === current.key){
      nextWord();
    }else{
      playAudioFor(current.key);
    }
  }

  // Snowball navigation
  document.getElementById("cat1").addEventListener("click", ()=>startCategory("1"));
  document.getElementById("cat2").addEventListener("click", ()=>startCategory("2"));
  document.getElementById("cat3").addEventListener("click", ()=>startCategory("3"));
  document.getElementById("cat4").addEventListener("click", ()=>startCategory("4"));

  // Bottom controls
  btnReplay.addEventListener("click", ()=>{ if(current) playAudioFor(current.key); });
  btnBack.addEventListener("click", ()=>{ startCategory(activeCat); });

  // Start
  startCategory("1");
</script>
</body>
</html>


